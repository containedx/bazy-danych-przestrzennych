
-- zadanie 1,2,3

CREATE DATABASE p301399;
\c p301399
CREATE EXTENSION postgis;

-- zadanie 4

CREATE TABLE budynki(id INT PRIMARY KEY, geometria GEOMETRY, nazwa VARCHAR);
CREATE TABLE drogi(id INT PRIMARY KEY, geometria GEOMETRY, nazwa VARCHAR);
CREATE TABLE punkty_informacyjne(id INT PRIMARY KEY, geometria GEOMETRY, nazwa VARCHAR);

-- zadanie 5

INSERT INTO budynki VALUES(1,'POLYGON((8 4, 10.5 4, 10.5 1.5, 8 1.5, 8 4))', 'BuildingA');
INSERT INTO budynki VALUES (2, 'POLYGON((4 7,6 7,6 5,4 5, 4 7))', 'BuildingB');
INSERT INTO budynki VALUES(3,'POLYGON((3 8, 5 8, 5 6, 3 6, 3 8))', 'BuildingC');
INSERT INTO budynki VALUES(4,'POLYGON((9 9, 10 9, 10 8, 9 8, 9 9))', 'BuildingD');
INSERT INTO budynki VALUES(6,'POLYGON((1 2, 2 2, 2 1, 1 1, 1 2))', 'BuildingF');

INSERT INTO punkty_informacyjne VALUES(1, 'POINT(9.5 6)', 'I');
INSERT INTO punkty_informacyjne VALUES(2, 'POINT(1 3.5)', 'G');
INSERT INTO punkty_informacyjne VALUES(3, 'POINT(5.5 1.5)', 'H');
INSERT INTO punkty_informacyjne VALUES(4, 'POINT(6 9.5)', 'K');
INSERT INTO punkty_informacyjne VALUES(5, 'POINT(6.5 6)', 'J');

INSERT INTO drogi VALUES(1, 'LINESTRING(0 4.5, 12 4.5)', 'RoadX');
INSERT INTO drogi VALUES(2, 'LINESTRING(0 7.5, 7.5 10.5)', 'RoadY');

-- zadanie 6

SELECT SUM(ST_Length(geometria)) FROM drogi;
SELECT ST_ASEWKT(geometria), ST_Area(geometria) AS pole, ST_Perimeter(geometria) AS obwod FROM budynki WHERE nazwa='BuildingA';
SELECT nazwa, ST_Area(geometria) FROM budynki ORDER BY nazwa;
SELECT nazwa, ST_Perimeter(geometria) AS obwod FROM budynki ORDER BY obwod DESC LIMIT 2;
SELECT ST_Distance(budynki.geometria, punkty_informacyjne.geometria) FROM budynki JOIN punkty_informacyjne ON punkty_informacyjne.nazwa = 'G' AND budynki.nazwa='BuildingC';
SELECT ST_Area(ST_Intersection(ST_Buffer((SELECT geometria FROM budynki WHERE nazwa LIKE 'BuildingB'), 0.5), (SELECT geometria FROM budynki WHERE nazwa LIKE 'BuildingC')));
SELECT nazwa FROM budynki WHERE ST_Y(ST_Centroid(geometria)) > ST_Y(ST_PointN((SELECT geometria FROM drogi WHERE nazwa LIKE 'RoadX'), 1));
SELECT ST_Area(ST_SymDifference((SELECT geometria FROM budynki WHERE nazwa LIKE 'BuildingC'), 'POLYGON((4 7, 6 7, 6 8, 4 8, 4 7))'));  














